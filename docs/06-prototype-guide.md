# プロトタイプガイドライン

## プロダクト名: LINE順番待ち

---

## ブランド設定

### カラーパレット

| 用途 | カラー名 | カラーコード |
|------|----------|--------------|
| Primary | LINE Green | #06C755 |
| Secondary | Dark Gray | #333333 |
| Accent | Orange | #FF6B35 |
| Background | Light Gray | #F5F5F5 |
| Text | Black | #1A1A1A |
| Sub Text | Gray | #666666 |

### 参考ブランド

- **LINE公式**: LINEミニアプリとしての統一感
- **グロースパック for LINE**: 既存アセットとのデザイン整合性

---

## 画面構成

### 画面一覧

| 画面名 | パス | 説明 |
|--------|------|------|
| 整理券発行画面 | /ticket | QRスキャン後の整理券取得画面 |
| 待機状況画面 | /waiting | リアルタイム順番確認・メイン画面 |
| 会員登録画面 | /register | 待機中の会員登録フォーム |
| 呼び出し画面 | /called | 順番到来時の通知画面 |
| 完了画面 | /complete | 入店完了後の画面 |

### 画面遷移図

```
[QRスキャン]
     ↓
[整理券発行画面] → [待機状況画面] ←→ [会員登録画面]
                        ↓
                  [呼び出し画面]
                        ↓
                   [完了画面]
```

---

## MVP機能仕様

### 機能1: QRコード整理券発行

**概要**: 店頭のQRコードをスキャンして整理券を取得する

**ユーザーストーリー**: As a 来店顧客, I want to QRコードをスキャンする, So that 簡単に整理券を取得できる

**UI要素**:
- 店舗名・ロゴ表示
- 整理券番号（大きく表示）
- 現在の待ち組数
- LINE友だち追加ボタン

**動作フロー**:
1. QRコードスキャンでLINEミニアプリ起動
2. 整理券番号を自動発行
3. 待ち組数を表示
4. LINE友だち追加を促す

---

### 機能2: リアルタイム順番確認

**概要**: 現在の待ち状況をリアルタイムで確認できる

**ユーザーストーリー**: As a 来店顧客, I want to あと何組かを確認する, So that 戻るタイミングがわかる

**UI要素**:
- 自分の整理券番号
- 現在呼び出し中の番号
- あと何組の表示（大きく）
- プログレスバー
- 会員登録バナー

**動作フロー**:
1. 待機状況画面を表示
2. 待ち組数をリアルタイム更新（WebSocket or ポーリング）
3. 3組前になったらハイライト表示
4. 会員未登録の場合、バナーを表示

---

### 機能3: LINE通知（順番接近・呼び出し）

**概要**: 順番が近づいたとき、順番が来たときにLINE通知を送信

**ユーザーストーリー**: As a 来店顧客, I want to LINE通知を受け取る, So that 順番を逃さない

**UI要素**:
- LINE Messaging APIによるプッシュ通知
- 通知タップで待機状況画面へ遷移

**動作フロー**:
1. 3組前で「もうすぐ順番です」通知
2. 順番到来で「お呼び出しです」通知
3. 通知タップでミニアプリ起動

---

### 機能4: 待機中の会員登録導線

**概要**: 待機時間を活用して会員登録を促す

**ユーザーストーリー**: As a 来店顧客, I want to 待ち時間中に会員登録する, So that 次回以降お得に利用できる

**UI要素**:
- 会員登録バナー（待機画面内）
- 会員登録フォーム（名前、電話番号など）
- 登録完了メッセージ
- 会員特典の説明

**動作フロー**:
1. 待機状況画面で会員登録バナーをタップ
2. 会員登録フォームを表示
3. 必要情報を入力して登録
4. 登録完了・特典案内を表示
5. 待機状況画面に戻る

---

## デモ環境設定

### 表示設定

- **ビューポート**: スマホサイズ（375px × 812px）
- **フレーム**: iPhoneモックアップ
- **フォント**: Noto Sans JP

### デモシナリオ

**シナリオ: ランチタイムの飲食店で順番待ち**

1. **シーン1: 整理券取得**
   - 顧客が店頭のQRコードをスキャン
   - 整理券番号「A-023」を取得
   - 「あと8組」と表示される

2. **シーン2: 店外で待機**
   - 顧客は近くのコンビニで買い物
   - スマホで「あと5組」を確認
   - 会員登録バナーをタップして登録開始

3. **シーン3: 会員登録完了**
   - 待機中に会員登録完了
   - 「次回使える10%OFFクーポン」を受け取る

4. **シーン4: 順番接近通知**
   - 「あと3組です。店舗にお戻りください」LINE通知
   - 顧客が店舗に向かう

5. **シーン5: 呼び出し・入店**
   - 「A-023番のお客様、お席の準備ができました」LINE通知
   - 顧客が入店、スタッフが入店確認

---

## 技術仕様（参考）

### フロントエンド
- Next.js (App Router)
- Tailwind CSS
- LIFF SDK（LINEミニアプリ）

### バックエンド
- API Routes (Next.js)
- LINE Messaging API
- WebSocket または Server-Sent Events（リアルタイム更新）

### データ
- 整理券情報（番号、発行時刻、ステータス）
- 顧客情報（LINE User ID、会員登録状態）
- 店舗情報（現在の呼び出し番号、待ち組数）
